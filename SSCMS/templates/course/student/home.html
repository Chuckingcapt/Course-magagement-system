{% extends "course/nav.html" %}
{% block title %}HomePage{% endblock %}
{% block content %}
    {% load static %}
    <link href="{% static 'css/list.css' %}" rel="stylesheet">
    <div class="main-container">
        <div class="main-bar">
            <form class="search-form" method="post">
                {% csrf_token %}
                <input class="input" id="search-key" type="text" name="search" {% if search_key != None %}value="{{ search_key }}" {% endif %}/>
                <input class="button" type="submit" value="Search" />
            </form>

            {% if view_kind != "select"%}
                <input class="button right-button" type="button" value="Select courses"  onclick='location.href="{% url 'view_course' 'select' %}"' />
            {% endif %}
            {% if view_kind != "withdraw"%}
                <input class="button right-button" type="button" value="Drop courses"  onclick='location.href="{% url 'view_course' 'withdraw' %}"' />
            {% endif %}
            {% if view_kind != "is_end"%}
                <input class="button right-button" type="button" value="Check ended courses"  onclick='location.href="{% url 'view_course' 'is_end' %}"' />
            {% endif %}
            {% if view_kind != "current"%}
                <input class="button right-button" type="button" value="Check current courses"  onclick='location.href="{% url 'view_course' 'current' %}"' />
            {% endif %}
        </div>
        <h3>{% if view_kind == "select"%}
                Select courses
            {% elif view_kind == "withdraw"%}
                Drop courses
            {% elif  view_kind == "is_end"%}
                Check ended courses
            {% elif view_kind == "current"%}
                Check current courses
            {% endif %}</h3>
        <table class="item-list course-list">
            <thead>
                <tr>
                    <th class="course-no">Course id</th>
                    <th class="course-name">Course name</th>
                    <th class="course-credit">Credits</th>
                    {% if view_kind == "is_end" %}
                        <th class="course-year-semester">Year&Semester</th>
                    {% else %}
                        <th class="course-number">Current enrollment/<br>Max enrollment</th>
                        <th class="course-year">Year</th>
                        <th class="course-semester">Semester</th>
                    {% endif %}
                    <th class="course-teacher">Instructor</th>
                    {% if view_kind == "is_end" %}
                        <th class="course-scores">Score</th>
                        <th class="course-comments">Instructor's comment</th>
                        <th class="course-rating">Student's rating</th>
                        <th class="course-assessment">Student's comment</th>
                        <th class="course-operation student-course">Operation</th>
                    {% else %}
                        <th class="course-schedule">Course schedule</th>
                        <th class="course-operation student-course">Operation</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody>
            {% if view_kind == "is_end" %}
                {# end course show student course #}
                {% for sc in course_list %}
                <tr id="course-id-{{ sc.course.id }}">
                    <td class="course-no">{{ sc.course.id }}</td>
                    <td class="course-name">{{ sc.course.name }}</td>
                    <td class="course-credit">{{ sc.course.credit }}</td>
                    <td class="course-year-semester">{{ sc.course.year }} {{ sc.course.get_semester_display }}</td>
                    <td class="course-teacher">{{ sc.course.teacher.name }}</td>
                    <td class="course-scores">{{ sc.scores }}</td>
                    <td class="course-comments">{{ sc.comments }}</td>
                    {% if sc.rating == None %}
                        <td class="course-rating">-</td>
                        <td class="course-assessment">-</td>
                        <td class="course-operation student-course">
                        <input class="button" type="button" value="Detail" onclick='location.href="{% url 'sview_detail' sc.id%}"' />
                        <input class="button" type="button" value="Rate the instructor"
                               onclick='location.href="{% url 'evaluate' sc.id %}"' />
                        </td>
                    {% else %}
                        <td class="course-rating">{{ sc.rating }}</td>
                        <td class="course-assessment">{{ sc.assessment }}</td>
                        <td class="course-operation student-course">
                        <input class="button" type="button" value="Detail" onclick='location.href="{% url 'sview_detail' sc.id%}"' />
                        </td>
                    {% endif %}
                </tr>
                {% endfor %}
            {% else %}
                {% for course in course_list %}
                <tr id="course-id-{{ course.id }}">
                    <td class="course-no">{{ course.id }}</td>
                    <td class="course-name">{{ course.name }}</td>
                    <td class="course-credit">{{ course.credit }}</td>
                    <td class="course-number">{{ course.get_current_count }}/{{ course.max_number }}</td>
                    <td class="course-year">{{ course.year }}</td>
                    <td class="course-semester">{{ course.get_semester_display }}</td>
                    <td class="course-teacher">{{ course.teacher.name }}</td>
                    <td class="course-schedule">
                        {% for schedule in course.get_schedules %}
                            <div>{{ schedule }}</div>
                        {% endfor %}
                    </td>
                        <td class="course-operation student-course">
                        {% if view_kind == "select"%}
                            <input class="button" type="button" value="Select"
                                   onclick='location.href="{% url 'operate_course' course.id 'select' %}"' />
                        {% endif %}
                        {% if view_kind == "withdraw"%}
                            <input class="button" type="button" value="Drop"
                                   onclick='location.href="{% url 'operate_course' course.id 'withdraw' %}"' />
                        {% endif %}
                        {% if view_kind == "current"%}
                            -
                        {% endif %}
                        </td>
                </tr>
                {% endfor %}
            {% endif %}
            </tbody>

        </table>
    </div>
{% endblock %}